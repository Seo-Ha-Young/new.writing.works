<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê²Œì‹œíŒ</title>
    <link rel="stylesheet" href="/css/style.css" />

    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $("#header").load("header"); // ì›í•˜ëŠ” íŒŒì¼ ê²½ë¡œë¥¼ ì‚½ì…í•˜ë©´ ëœë‹¤
        $("#footers").load("footer"); // ì¶”ê°€ ì¸í´ë£¨ë“œë¥¼ ì›í•  ê²½ìš° ì´ëŸ°ì‹ìœ¼ë¡œ ì¶”ê°€í•˜ë©´ ëœë‹¤
        $("#quickmenu").load("quickmenu");
      });
    </script>
  </head>

  <body>
    <div id="header"></div>
    <div class="board_wrap">
      <div class="board_title">
        <strong>ì´ë¯¸ì§€/ì—ì„¸ì´ ê²Œì‹œíŒ</strong>
      </div>
      <div class="board_list_wrap">
        <div class="board_list">
          <div class="top">
            <div class="num">ë²ˆí˜¸</div>
            <div class="type">íƒ€ì…</div>
            <div class="title">ì œëª©</div>
            <div class="writer">ê¸€ì“´ì´</div>
            <div class="date">ì‘ì„±ì¼</div>
            <div class="count">ì¶”ì²œìˆ˜</div>
          </div>
          <div th:each="dto : ${result.dtoList}">
            <div class="num">[[${dto.no}]]</div>
            <div class="type" th:if="${dto.image_no == null}">ì—ì„¸ì´</div>
            <div class="type" th:if="${dto.image_no != null}">ì´ë¯¸ì§€</div>
            <div class="title">
              <a
                th:if="${dto.image_no == null}"
                th:href="@{/html/view_essay(no=${dto.no}, page=${result.page}, type= ${pageRequestDTO.type}, keyword= ${pageRequestDTO.keyword})}"
                >[[${dto.post_name}]]</a
              >
              <a
                th:if="${dto.image_no != null}"
                th:href="@{/html/view_image(no=${dto.no}, page=${result.page}, type= ${pageRequestDTO.type}, keyword= ${pageRequestDTO.keyword})}"
                >[[${dto.post_name}]]</a
              >
            </div>
            <div class="writer">[[${dto.writer}]]</div>
            <div class="date">
              [[${#temporals.format(dto.regDate, 'yy/MM/dd')}]]
            </div>
            <div class="count">
              <c th:if="${dto.goodCnt != 0}"> ğŸ‘[[${dto.goodCnt}]] </c>
              <c th:if="${dto.goodCnt != 0} and ${dto.badCnt != 0}"> / </c>
              <c th:if="${dto.badCnt != 0}"> ğŸ‘[[${dto.badCnt}]] </c>
            </div>
          </div>
        </div>

        <form action="/html/board" method="get" id="searchForm">
          <div class="input-group">
            <input type="hidden" name="page" value="1">
            <div class="input-group-prepend">
              <select class="custom-select" name="type">
                <option th:selected="${pageRequestDTO.type == null}">-------</option>
                <option value="t" th:selected="${pageRequestDTO.type == 't'}" >ì œëª©</option>
                <option value="c" th:selected="${pageRequestDTO.type == 'c'}"  >ë‚´ìš©</option>
                <option value="w"  th:selected="${pageRequestDTO.type == 'w'}" >ì‘ì„±ì</option>
                <option value="tc"  th:selected="${pageRequestDTO.type == 'tc'}" >ì œëª© + ë‚´ìš©</option>
                <option value="tcw"  th:selected="${pageRequestDTO.type == 'tcw'}" >ì œëª© + ë‚´ìš© + ì‘ì„±ì</option>
              </select>
            </div>
            <input class="form-control" name="keyword" th:value="${pageRequestDTO.keyword}">
            <div class="input-group-append" id="button-addon4">
              <button class="btn btn-outline-secondary btn-search" type="button">Search</button>
              <button class="btn btn-outline-secondary btn-clear" type="button">Clear</button>
            </div>
          </div>
        </form>

        <div class="board_page">
          <b th:if="${result.prev}">
            <a
              class="bt first"
              th:href="@{/html/board(page= ${1}, type= ${pageRequestDTO.type}, keyword= ${pageRequestDTO.keyword})}"
            >
              <<
            </a>
            <a
              class="bt prev"
              th:href="@{/html/board(page= ${result.start -1}, type= ${pageRequestDTO.type}, keyword= ${pageRequestDTO.keyword})}"
              tabindex="-1"
            >
              <
            </a>
          </b>
          <b th:each="page: ${result.pageList}">
            <a
              class="num"
              th:href="@{/html/board(page= ${page}, type= ${pageRequestDTO.type}, keyword= ${pageRequestDTO.keyword})}"
              >[[${page}]]</a
            >
          </b>
          <b th:if="${result.next}">
            <a
              class="bt next"
              th:href="@{/html/board(page= ${result.end +1}, type= ${pageRequestDTO.type}, keyword= ${pageRequestDTO.keyword})}"
            >
              >
            </a>
            <a
              class="bt last"
              th:href="@{/html/board(page= ${result.totalPage}, type= ${pageRequestDTO.type}, keyword= ${pageRequestDTO.keyword})}"
            >
              >>
            </a>
          </b>
        </div>

        <div class="bt_wrap">
          <a th:href="@{/html/write}" class="'on">ë“±ë¡</a>
          <!-- <a href="#">ìˆ˜ì •</a> -->
        </div>
      </div>
    </div>
    <div id="footers"></div>
    <div id="quickmenu"></div>
    <script th:inline="javascript">
           var msg = [[${msg}]];
           console.log(msg);
           if(msg) {
               $(".modal-body > p").html(msg);
               $(".modal").modal();
           }
           var searchForm = $("#searchForm");
           $('.btn-search').click(function(e) {
               searchForm.submit();
           });
           $('.btn-clear').click(function(e) {
               searchForm.empty().submit();
           });
  </script>
  </body>
</html>
